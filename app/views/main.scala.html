@*
 * This template is called from the `index` template. This template
 * handles the rendering of the page header and body tags. It takes
 * two arguments, a `String` for the title of the page and an `Html`
 * object to insert into the body of the page.
 *@
@(title: String)(content: Html)

<!DOCTYPE html>
<html lang="en">

<head>
    <title>@title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/png" href='@routes.Assets.versioned("images/favicon.png")'>
    <link rel="stylesheet" href="@routes.Assets.versioned("lib/bootstrap/css/bootstrap.min.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/font-awesome-4.7.0/css/font-awesome.min.css")">
    <link rel="stylesheet" href="@routes.Assets.versioned("stylesheets/main.css")">
</head>

<body>

    <!-- Loading Spinner -->
    <div id="loading-spinner" style="display: none; position: fixed; top: 0; left: 0;
        width: 100%; height: 100%; background: rgba(255,255,255,0.7); z-index: 9999;
        display: flex; align-items: center; justify-content: center;">
        <div class="spinner-border text-primary" role="status" style="width: 4rem; height: 4rem;">
            <span class="sr-only">Carregando...</span>
        </div>
    </div>

    <main>
        <div class="container">
            @navbar()

            <div class="mb-4">
                @content
            </div>

            @footer()
        </div>
    </main>

    <div class="modal fade" id="mainModal" tabindex="-1" aria-labelledby="mainModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="mainModalLabel">Aviso</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Fechar"></button>
                </div>

                <div class="modal-body">
                    Este modal foi aberto automaticamente com base na URL.
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                </div>

            </div>
        </div>
    </div>

    <script src="@routes.Assets.versioned("lib/jquery/jquery.min.js")"></script>
    <script src="@routes.Assets.versioned("lib/bootstrap/js/bootstrap.bundle.min.js")"></script>
    <script src="@routes.Assets.versioned("javascripts/main.js")"></script>
    <script>

        window.onload = function() {
            setTimeout(function () {
                document.getElementById("loading-spinner").style.display = "none";
            }, 300);
        }

        // Mostrar loading ao enviar qualquer formulÃ¡rio
        document.addEventListener("DOMContentLoaded", function () {

            const spinner = document.getElementById("loading-spinner");

            document.querySelectorAll("form").forEach(form => {
                form.addEventListener("submit", () => {
                    spinner.style.display = "flex";
                });
            });

            document.querySelectorAll("a").forEach(link => {
                link.addEventListener("click", function (e) {
                    const href = link.getAttribute("href");
                    if (href && !href.startsWith("#") && !link.hasAttribute("target")) {
                        spinner.style.display = "flex";
                    }
                });
            });

        });
    </script>
</body>

</html>